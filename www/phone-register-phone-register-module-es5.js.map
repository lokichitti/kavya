{"version":3,"sources":["./src/app/phone-register/phone-register.page.html","./src/app/phone-register/phone-register.module.ts","./src/app/phone-register/phone-register.page.scss","./src/app/phone-register/phone-register.page.ts"],"names":[],"mappings":"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","file":"phone-register-phone-register-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>Register</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding class=\\\"form-content\\\">\\n  <form [formGroup]=\\\"validations_form\\\"  (ngSubmit)=\\\"getOTP(validations_form)\\\">\\n     <div formGroupName=\\\"country_phone\\\">\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Country</ion-label>\\n        <ion-select formControlName=\\\"country\\\" cancelText=\\\"Cancel\\\" okText=\\\"OK\\\">\\n          <ion-select-option *ngFor=\\\"let item of countries\\\" [value]=\\\"item\\\">{{item.name}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Phone</ion-label>\\n        <ion-input placeholder=\\\"{{ validations_form.value.country_phone.country.code }}\\\" type=\\\"text\\\" formControlName=\\\"phone\\\"></ion-input>\\n      </ion-item>\\n      <div class=\\\"validation-errors\\\">\\n        <ng-container *ngFor=\\\"let validation of validation_messages.phone\\\">\\n          <div class=\\\"error-message\\\" *ngIf=\\\"validations_form.get('country_phone').get('phone').hasError(validation.type) && (validations_form.get('country_phone').get('phone').dirty || validations_form.get('country_phone').get('phone').touched)\\\">\\n            <ion-icon name=\\\"information-circle-outline\\\"></ion-icon> {{ validation.message }}\\n          </div>\\n        </ng-container>\\n      </div>\\n    </div>\\n        <ion-button color=\\\"primary\\\" class=\\\"submit-btn\\\" expand=\\\"full\\\" type=\\\"submit\\\" [disabled]=\\\"!validations_form.valid\\\" [disabled]=\\\"disableGetOTPButton\\\">Get OTP</ion-button>\\n  </form>\\n  <ion-item>\\n      <ion-label position=\\\"floating\\\">OTP</ion-label>\\n      <ion-input color = \\\"primary\\\" type=\\\"text\\\" placeholder=\\\"Enter code\\\" [(ngModel)]=\\\"OTPcode1\\\"></ion-input>\\n    </ion-item>\\n  <ion-button expand=\\\"full\\\" (click)=\\\"verify()\\\" [disabled]=\\\"disableVerifyButton\\\">Verify OTP</ion-button>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PhoneRegisterPage } from './phone-register.page';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PhoneRegisterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PhoneRegisterPage]\n})\nexport class PhoneRegisterPageModule {}\n","module.exports = \".error-message {\\n  color: red;\\n  font-size: 14px;\\n  margin-left: 10px;\\n  margin-top: 10px;\\n}\\n\\n.submit-btn {\\n  margin-top: 40px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2htZWNkMDAxNTIzL2lvbmljLWRvbnQtZGVsZXRlL2ZpcmViYXNlLXdvcmtpbmcvcHJvZ3Jlc3Mvc3JjL2FwcC9waG9uZS1yZWdpc3Rlci9waG9uZS1yZWdpc3Rlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3Bob25lLXJlZ2lzdGVyL3Bob25lLXJlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLFVBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQ0FGOztBREdBO0VBQ0UsZ0JBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL3Bob25lLXJlZ2lzdGVyL3Bob25lLXJlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvci1tZXNzYWdlXG57XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5zdWJtaXQtYnRuIHtcbiAgbWFyZ2luLXRvcDogNDBweDtcbn0iLCIuZXJyb3ItbWVzc2FnZSB7XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5zdWJtaXQtYnRuIHtcbiAgbWFyZ2luLXRvcDogNDBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ToastController } from '@ionic/angular';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { AbstractControl, ValidatorFn } from '@angular/forms';\nimport libphonenumber from 'google-libphonenumber';\nimport { CountryPhone } from '../models/country-phone.model';\nimport { Validators, FormBuilder} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\nimport { FirebaseAuthentication } from '@ionic-native/firebase-authentication/ngx';\nimport { \n  UsernameValidator, \n  PhoneValidator, \n  PasswordValidator } from '../models/validators';\n  import * as firebase from 'firebase';\n  import { AlertController } from '@ionic/angular';\n\n  declare var SMSReceive: any;\n  var phoneSignInWithVerificationId: any;\n  var OTPcode: 123456;\n  var phoneNumber: string;\n@Component({\n  selector: 'app-phone-register',\n  templateUrl: './phone-register.page.html',\n  styleUrls: ['./phone-register.page.scss'],\n})\nexport class PhoneRegisterPage implements OnInit {\n\n  OTP: string = '';\n  showOTPInput: boolean = false;\n  OTPmessage: string = 'An OTP is sent to your number. You should receive it in 15 s'\n  verificationId1: any;\n  code: number;\n  OTPcode1: number;\n  validations_form: FormGroup;\n  country_phone_group: FormGroup;\n  disableVerifyButton: boolean = true;\n  disableGetOTPButton: boolean = false;\n  countries: Array<CountryPhone>;\n  constructor(\n    public formBuilder: FormBuilder,\n    private router: Router,\n    private firebaseX: FirebaseX,\n    private firebaseAuthentication: FirebaseAuthentication,\n    private alertCtrl: AlertController,\n    private toastCtrl: ToastController\n  ) { }\n\n  ngOnInit() {\n     //  We just use a few random countries, however, you can use the countries you need by just adding them to this list.\n    // also you can use a library to get all the countries from the world.\n    this.countries = [\n      new CountryPhone('IN', 'India'),\n      new CountryPhone('US', 'United States'),\n      new CountryPhone('BR', 'Brasil')\n    ];\n    let country = new FormControl(this.countries[0], Validators.required);\n    let phone = new FormControl('', Validators.compose([\n      Validators.required,\n      PhoneValidator.validCountryPhone(country)\n    ]));\n    this.country_phone_group = new FormGroup({\n      country: country,\n      phone: phone\n    });\n\n    this.validations_form = this.formBuilder.group({\n      country_phone: this.country_phone_group\n    });\n}\n\n\nvalidation_messages = {\n  'phone': [\n    { type: 'required', message: 'Phone is required.' },\n    { type: 'validCountryPhone', message: 'The phone is incorrect for the selected country.' }\n  ],\n}\ncreateProfile(values)\n  {\n    /*this.angularFireAuth.authState.subscribe(auth=>{\n      this.angularFireDatabase.list(`profile/${auth.uid}`).push\n    });*/\n  }\n  \n  getOTP(values){\n    phoneNumber = values.value.country_phone.country.code + values.value.country_phone.phone;\n    console.log(\"Get OTP called \" + phoneNumber);\n    this.disableGetOTPButton = true;\n    this.disableVerifyButton = false;\n    this.presentAlertPrompt();\n    this.firebaseAuthentication.verifyPhoneNumber(phoneNumber, 3000).then (function(verificationId) {\n      phoneSignInWithVerificationId = verificationId;\n    console.log(\"OTP Successfully Sent \" + verificationId);\n    this.presentAlertPrompt();\n    }).catch(e => {\n      console.log(e);\n  }); \n}\n\n  verify(){\n    console.log(\"verify called Entered OTP is \"+ this.OTPcode1);\n    this.firebaseAuthentication.signInWithVerificationId(phoneSignInWithVerificationId ,this.OTPcode1);\n    console.log(\"OTP Successfully Sent \" + phoneSignInWithVerificationId);\n  }\n  async presentAlertPrompt() {\n    console.log(\"presentAlertPrompt called\");\n    const alert = await this.alertCtrl.create({\n      header: 'OTP Sent Successfully',\n      inputs: [\n        {\n          name: 'OTP',\n          type: 'text',\n          placeholder: 'Enter OTP'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'primary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          }\n        }, {\n          text: 'Ok',\n          handler: (data) => {\n            this.OTPcode1 = data.OTP;\n            this.verify();\n            console.log('Confirm Ok');\n          }\n        }\n      ],\n      backdropDismiss: false\n    });\n\n    await alert.present();\n    setTimeout(()=>{\n      alert.dismiss();\n  }, 60000);\n  }\n\n}"],"sourceRoot":""}