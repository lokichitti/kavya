{"version":3,"sources":["./src/app/phone-register/phone-register.page.html","./src/app/models/country-phone.model.ts","./src/app/phone-register/phone-register.module.ts","./src/app/phone-register/phone-register.page.scss","./src/app/phone-register/phone-register.page.ts"],"names":[],"mappings":"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","file":"phone-register-phone-register-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title>Register</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding class=\\\"form-content\\\">\\n  <form [formGroup]=\\\"validations_form\\\"  (ngSubmit)=\\\"getOTP(validations_form.value)\\\">\\n     <div formGroupName=\\\"country_phone\\\">\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Country</ion-label>\\n        <ion-select formControlName=\\\"country\\\" cancelText=\\\"Cancel\\\" okText=\\\"OK\\\">\\n          <ion-select-option *ngFor=\\\"let item of countries\\\" [value]=\\\"item\\\">{{item.name}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Phone</ion-label>\\n        <ion-input placeholder=\\\"{{ validations_form.value.country_phone.country.sample_phone }}\\\" type=\\\"text\\\" formControlName=\\\"phone\\\"></ion-input>\\n      </ion-item>\\n      <div class=\\\"validation-errors\\\">\\n        <ng-container *ngFor=\\\"let validation of validation_messages.phone\\\">\\n          <div class=\\\"error-message\\\" *ngIf=\\\"validations_form.get('country_phone').get('phone').hasError(validation.type) && (validations_form.get('country_phone').get('phone').dirty || validations_form.get('country_phone').get('phone').touched)\\\">\\n            <ion-icon name=\\\"information-circle-outline\\\"></ion-icon> {{ validation.message }}\\n          </div>\\n        </ng-container>\\n      </div>\\n    </div>\\n        <ion-button color=\\\"primary\\\" class=\\\"submit-btn\\\" expand=\\\"full\\\" type=\\\"submit\\\" [disabled]=\\\"!validations_form.valid\\\">Get OTP</ion-button>\\n  </form>\\n  <ion-item>\\n      <ion-label position=\\\"floating\\\">OTP</ion-label>\\n      <ion-input color = \\\"primary\\\" type=\\\"text\\\" placeholder=\\\"Enter code\\\" [(ngModel)]=\\\"code\\\"></ion-input>\\n    </ion-item>\\n  <ion-button expand=\\\"full\\\" (click)=\\\"verify()\\\">Verify</ion-button>\\n</ion-content>\"","import libphonenumber from 'google-libphonenumber';\n\nexport class CountryPhone {\n  iso: string;\n  name: string;\n  code: string;\n  sample_phone: string;\n\n  constructor (iso: string, name: string) {\n    this.iso = iso;\n    this.name = name;\n\n    let phoneUtil = libphonenumber.PhoneNumberUtil.getInstance(),\n        PNF = libphonenumber.PhoneNumberFormat,\n        PNT = libphonenumber.PhoneNumberType,\n        country_example_number = phoneUtil.getExampleNumberForType(this.iso, PNT.MOBILE),\n        // We need to define what kind of country phone number type we are going to use as a mask.\n        // You can choose between many types including:\n        //    - FIXED_LINE\n        //    - MOBILE\n        //    - For more types please refer to google libphonenumber repo (https://github.com/googlei18n/libphonenumber/blob/f9e9424769964ce1970c6ed2bd60b25b976dfe6f/javascript/i18n/phonenumbers/phonenumberutil.js#L913)\n        example_number_formatted = phoneUtil.format(country_example_number, PNF.NATIONAL);\n        // We need to define how are we going to format the phone number\n        // You can choose between many formats including:\n        //    - NATIONAL\n        //    - INTERNATIONAL\n        //    - E164\n        //    - RFC3966\n\n    this.sample_phone = example_number_formatted;\n    this.code = \"+\" + country_example_number.getCountryCode();\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PhoneRegisterPage } from './phone-register.page';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PhoneRegisterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PhoneRegisterPage]\n})\nexport class PhoneRegisterPageModule {}\n","module.exports = \".error-message {\\n  color: red;\\n  font-size: 14px;\\n  margin-left: 10px;\\n  margin-top: 10px;\\n}\\n\\n.submit-btn {\\n  margin-top: 40px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2htZWNkMDAxNTIzL2lvbmljLWRvbnQtZGVsZXRlL2ZpcmViYXNlLXdvcmtpbmcvcHJvZ3Jlc3Mvc3JjL2FwcC9waG9uZS1yZWdpc3Rlci9waG9uZS1yZWdpc3Rlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3Bob25lLXJlZ2lzdGVyL3Bob25lLXJlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLFVBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQ0FGOztBREdBO0VBQ0UsZ0JBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL3Bob25lLXJlZ2lzdGVyL3Bob25lLXJlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvci1tZXNzYWdlXG57XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5zdWJtaXQtYnRuIHtcbiAgbWFyZ2luLXRvcDogNDBweDtcbn0iLCIuZXJyb3ItbWVzc2FnZSB7XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5zdWJtaXQtYnRuIHtcbiAgbWFyZ2luLXRvcDogNDBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { AbstractControl, ValidatorFn } from '@angular/forms';\nimport libphonenumber from 'google-libphonenumber';\nimport { CountryPhone } from '../models/country-phone.model';\nimport { Validators, FormBuilder} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\nimport { FirebaseAuthentication } from '@ionic-native/firebase-authentication/ngx';\nimport { \n  UsernameValidator, \n  PhoneValidator, \n  PasswordValidator } from '../models/validators';\n\n@Component({\n  selector: 'app-phone-register',\n  templateUrl: './phone-register.page.html',\n  styleUrls: ['./phone-register.page.scss'],\n})\nexport class PhoneRegisterPage implements OnInit {\n\n  verificationId: any;\n  code = '';\n  validations_form: FormGroup;\n  country_phone_group: FormGroup;\n\n  countries: Array<CountryPhone>;\n  constructor(\n    public formBuilder: FormBuilder,\n    private router: Router,\n    private firebaseX: FirebaseX,\n    private firebaseAuthentication: FirebaseAuthentication\n  ) { }\n\n  ngOnInit() {\n     //  We just use a few random countries, however, you can use the countries you need by just adding them to this list.\n    // also you can use a library to get all the countries from the world.\n    this.countries = [\n      new CountryPhone('IN', 'India'),\n      new CountryPhone('US', 'United States'),\n      new CountryPhone('BR', 'Brasil')\n    ];\n    let country = new FormControl(this.countries[0], Validators.required);\n    let phone = new FormControl('', Validators.compose([\n      Validators.required,\n      PhoneValidator.validCountryPhone(country)\n    ]));\n    this.country_phone_group = new FormGroup({\n      country: country,\n      phone: phone\n    });\n\n    this.validations_form = this.formBuilder.group({\n      country_phone: this.country_phone_group\n    });\n  \n\n    this.firebaseX.getToken()\n  .then(token => console.log(`The token is ${token}`)) // save the token server-side and use it to push notifications to this device\n  .catch(error => console.error('Error getting token', error));\n\nthis.firebaseX.onMessageReceived()\n  .subscribe(data => console.log(`User opened a notification ${data}`));\n\nthis.firebaseX.onTokenRefresh()\n  .subscribe((token: string) => console.log(`Got a new token ${token}`));\n  \n  this.firebaseAuthentication.createUserWithEmailAndPassword('test@gmail.com', '123')\n  .then((res: any) => console.log(res))\n  .catch((error: any) => console.error(error));\n\n  this.firebaseAuthentication.verifyPhoneNumber(\"+123456789\", 30000).then(function(verificationId) {\n    // pass verificationId to signInWithVerificationId\n});\n\n}\n\n\nvalidation_messages = {\n  'phone': [\n    { type: 'required', message: 'Phone is required.' },\n    { type: 'validCountryPhone', message: 'The phone is incorrect for the selected country.' }\n  ],\n}\ncreateProfile(values)\n  {\n    /*this.angularFireAuth.authState.subscribe(auth=>{\n      this.angularFireDatabase.list(`profile/${auth.uid}`).push\n    });*/\n  }\n  onSubmit(values){\n   // console.log(values);\n   // (<any>window).FirebasePlugin.verfyPhoneNumber(\"+918073990063\"/*values.country_phone.phone*/, 60, ( credential ) => {\n     /* alert(\"OTP Sent Successfully\");\n      console.log(credential);\n      this.verificationId = credential.verificationId;\n    }, (error) =>{\n      console.error(error);\n    });*/\n  }\n\n  verify(){\n   /*   let signInCredential = firebase.auth.PhoneAuthProvider.credential(this.verificationId, this.code);\n      firebase.auth().signInWithCredential(signInCredential).then((info) => { console.log(info);}, (error) => {\n      console.log(error);\n    })*/\n  }\n\n\n}\n"],"sourceRoot":""}